# ğŸ“Š Diagramas e Fluxogramas - IntegraÃ§Ã£o PIX

## 1. Fluxo Completo do Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PIZZARIA RAMOS - SISTEMA PIX                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   CLIENTE/USER  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                  â”‚                  â”‚
                    â†“                  â†“                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   STORE PAGE     â”‚ â”‚   ADMIN LOGIN    â”‚ â”‚   ADMIN PANEL    â”‚
         â”‚  - CardÃ¡pio      â”‚ â”‚  - AutenticaÃ§Ã£o  â”‚ â”‚  - Dashboard     â”‚
         â”‚  - Produtos      â”‚ â”‚  - SeguranÃ§a     â”‚ â”‚  - Pedidos       â”‚
         â”‚  - Carrinho      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  - ConfiguraÃ§Ã£o  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                         â”‚
                  â†“                                         â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CHECKOUT MODAL  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ PIX SETTINGS MODAL      â”‚
         â”‚                  â”‚               â”‚                          â”‚
         â”‚ 1. Dados Pessoaisâ”‚               â”‚ âœï¸ Configurar PIX:      â”‚
         â”‚ 2. EndereÃ§o      â”‚               â”‚ - Tipo de Chave (4 opt.)â”‚
         â”‚ 3. Forma Pagto   â”‚               â”‚ - Chave PIX             â”‚
         â”‚ 4. Submeter      â”‚               â”‚ - Nome Titular          â”‚
         â”‚                  â”‚               â”‚ - Nome Banco            â”‚
         â”‚ [ğŸ“± PIX Selected]â”‚               â”‚ - ValidaÃ§Ãµes em tempo   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚ - Save/Cancel           â”‚
                  â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                  â”‚
                  â†“                                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           SUPABASE POSTGRESQL BANCO                  â”‚
         â”‚                                                       â”‚
         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚   â”‚ TABLE: store_settings                       â”‚   â”‚
         â”‚   â”‚                                             â”‚   â”‚
         â”‚   â”‚ key: "pix_config"                          â”‚   â”‚
         â”‚   â”‚ value: {                                    â”‚   â”‚
         â”‚   â”‚   pix_key: "123.456.789-01",              â”‚   â”‚
         â”‚   â”‚   key_type: "cpf",                         â”‚   â”‚
         â”‚   â”‚   holder_name: "PIZZARIA RAMOS",          â”‚   â”‚
         â”‚   â”‚   bank_name: "Nubank"                      â”‚   â”‚
         â”‚   â”‚ }                                           â”‚   â”‚
         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚                     â–²                                â”‚
         â”‚                     â”‚ INSERT/UPDATE                 â”‚
         â”‚                     â”‚                               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                         â”‚
                  â†“                         â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ SUCCESS SCREEN   â”‚      â”‚  WHATSAPP API   â”‚
         â”‚                  â”‚      â”‚                  â”‚
         â”‚ âœ… Pedido OK    â”‚      â”‚ ğŸ“² Enviar       â”‚
         â”‚ ğŸ’  Dados PIX    â”‚      â”‚  Mensagem       â”‚
         â”‚ [Copiar Chave]  â”‚      â”‚                  â”‚
         â”‚ âš ï¸ Aviso        â”‚      â”‚ Inclui:         â”‚
         â”‚   Comprovante   â”‚      â”‚ - Dados Pedido  â”‚
         â”‚                  â”‚      â”‚ - Itens         â”‚
         â”‚ [Voltar Menu]   â”‚      â”‚ - Total         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ - Link Maps     â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ CLIENTE RECEBE   â”‚
                                    â”‚                  â”‚
                                    â”‚ ğŸ’¬ Mensagem    â”‚
                                    â”‚ ğŸ’  Dados PIX    â”‚
                                    â”‚ ğŸ—ºï¸ LocalizaÃ§Ã£o  â”‚
                                    â”‚ ğŸ“ Contato      â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Fluxo de ValidaÃ§Ã£o (PixSettingsModal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin clica "Salvar ConfiguraÃ§Ãµes"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   validateInputs() chamado     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚
    â†“                          â†“
Chave PIX vazia?        Titular vazio?
    â”‚ SIM                     â”‚ SIM
    â†“                         â†“
âŒ Erro                  âŒ Erro
                              
    â”‚ NÃƒO                     â”‚ NÃƒO
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
         Banco vazio?
             â”‚ SIM
             â†“
          âŒ Erro
             â”‚ NÃƒO
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Validar formato chave   â”‚
    â”‚ baseado em keyType      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                 â”‚
   CPF?                          CNPJ?
    â”‚                                 â”‚
    â†“                                 â†“
/^\d{11}$|^\d{3}...    /^\d{14}$|^\d{2}...
    â”‚                                 â”‚
    â”‚                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚          â”‚         â”‚
           EMAIL?      PHONE?  âœ… OK
             â”‚          â”‚       
             â†“          â†“
      /^[^@]+@...  /^\d{10,11}...
             â”‚          â”‚
             â†“          â†“
           âœ… OK     âœ… OK
             â”‚         â”‚
             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                  â”‚
                  â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Todas validaÃ§Ãµes passaram?   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚
        SIM              NÃƒO
         â”‚                â”‚
         â†“                â†“
    Fazer        âŒ Exibir
    RequisiÃ§Ã£o   Erro com
    Supabase     mensagem
         â”‚        clara
         â”‚
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ INSERT/UPDATE   â”‚
    â”‚ store_settings  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
         â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
         â”‚        â”‚
       âœ… OK    âŒ Erro
         â”‚        â”‚
         â†“        â†“
    Sucesso!   Erro salvo
         â”‚        â”‚
         â†“        â†“
    Verde OK   Vermelho
    Mensagem   Mensagem
         â”‚        â”‚
         â†“        â†“
    Fechar      Manter
    Modal       Aberto
```

---

## 3. Estrutura de Estados (PixSettingsModal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               COMPONENT STATE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ â€¢ loading: boolean                                     â”‚
â”‚   â””â”€ true enquanto salva no Supabase                   â”‚
â”‚                                                         â”‚
â”‚ â€¢ pixKey: string                                       â”‚
â”‚   â””â”€ valor da chave PIX digitada                       â”‚
â”‚                                                         â”‚
â”‚ â€¢ keyType: "cpf"|"cnpj"|"email"|"phone"               â”‚
â”‚   â””â”€ tipo selecionado (muda placeholder/validaÃ§Ã£o)   â”‚
â”‚                                                         â”‚
â”‚ â€¢ holderName: string                                   â”‚
â”‚   â””â”€ nome completo do titular                         â”‚
â”‚                                                         â”‚
â”‚ â€¢ bankName: string                                     â”‚
â”‚   â””â”€ nome do banco (Nubank, Inter, etc.)              â”‚
â”‚                                                         â”‚
â”‚ â€¢ saveSuccess: boolean                                 â”‚
â”‚   â””â”€ mostra tela de sucesso por 1.5s                  â”‚
â”‚                                                         â”‚
â”‚ â€¢ error: string                                        â”‚
â”‚   â””â”€ mensagem de erro detalhada (se houver)           â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Tipos de Chave PIX - ValidaÃ§Ã£o Detalhada

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TIPOS DE CHAVE PIX                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  CPF (Pessoa FÃ­sica)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Regex: /^\d{11}$|^\d{3}\.\d{3}\.\d{3}-\d{2}$/      â”‚   â”‚
â”‚  â”‚ Aceita:                                             â”‚   â”‚
â”‚  â”‚  âœ… 12345678901 (sem formataÃ§Ã£o)                    â”‚   â”‚
â”‚  â”‚  âœ… 123.456.789-01 (com formataÃ§Ã£o)                â”‚   â”‚
â”‚  â”‚ Rejeita:                                            â”‚   â”‚
â”‚  â”‚  âŒ 123456789 (muito curto)                         â”‚   â”‚
â”‚  â”‚  âŒ 12345-6789-01 (formataÃ§Ã£o errada)              â”‚   â”‚
â”‚  â”‚  âŒ abcdefghijk (letras)                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  CNPJ (Empresa)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Regex: /^\d{14}$|^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$â”‚   â”‚
â”‚  â”‚ Aceita:                                             â”‚   â”‚
â”‚  â”‚  âœ… 12345678000195 (sem formataÃ§Ã£o)                â”‚   â”‚
â”‚  â”‚  âœ… 12.345.678/0001-95 (com formataÃ§Ã£o)            â”‚   â”‚
â”‚  â”‚ Rejeita:                                            â”‚   â”‚
â”‚  â”‚  âŒ 123456789 (muito curto)                         â”‚   â”‚
â”‚  â”‚  âŒ 12.345.678.0001.95 (formataÃ§Ã£o errada)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  EMAIL (Identificador)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Regex: /^[^\s@]+@[^\s@]+\.[^\s@]+$/                â”‚   â”‚
â”‚  â”‚ Aceita:                                             â”‚   â”‚
â”‚  â”‚  âœ… usuario@email.com                              â”‚   â”‚
â”‚  â”‚  âœ… pizza@pizzariaramos.com.br                     â”‚   â”‚
â”‚  â”‚ Rejeita:                                            â”‚   â”‚
â”‚  â”‚  âŒ usuario (sem @)                                 â”‚   â”‚
â”‚  â”‚  âŒ usuario@ (sem domÃ­nio)                          â”‚   â”‚
â”‚  â”‚  âŒ usuario@.com (sem provedor)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  TELEFONE (Celular)                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Regex: /^\d{10,11}$|^\(\d{2}\)\s?\d{4,5}-\d{4}$/  â”‚   â”‚
â”‚  â”‚ Aceita:                                             â”‚   â”‚
â”‚  â”‚  âœ… 11912345678 (11 dÃ­gitos)                        â”‚   â”‚
â”‚  â”‚  âœ… 1133334444 (10 dÃ­gitos)                         â”‚   â”‚
â”‚  â”‚  âœ… (11) 99999-9999 (com formataÃ§Ã£o)               â”‚   â”‚
â”‚  â”‚  âœ… (11) 3333-4444 (com formataÃ§Ã£o, sem 9)        â”‚   â”‚
â”‚  â”‚ Rejeita:                                            â”‚   â”‚
â”‚  â”‚  âŒ 119123456 (muito curto)                         â”‚   â”‚
â”‚  â”‚  âŒ (11)99999-9999 (sem espaÃ§o apÃ³s parÃªntese)    â”‚   â”‚
â”‚  â”‚  âŒ (11) 9999999 (sem formataÃ§Ã£o final)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Lifecycle do Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LIFECYCLE DO PIX SETTINGS MODAL                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MONTE (Componente criado)
       â”‚
       â†“
  useEffect([isOpen])
       â”‚
    isOpen = true?
       â”‚  SIM          â”‚ NÃƒO
       â†“                â””â”€ (ignora)
  fetchPixSettings()
       â”‚
       â”œâ”€ setLoading(true)
       â”‚
       â””â”€ Busca config atual no Supabase
            â”‚
            â”œâ”€ Encontrou? Preenche campos
            â”‚
            â””â”€ NÃ£o encontrou? Campos vazios
                     â”‚
                     â†“
              setLoading(false)
                     â”‚
                     â†“
              Modal pronto para ediÃ§Ã£o


DURANTE USO (Modal aberto)
       â”‚
   Digitou algo?
       â”œâ”€ setPixKey()
       â”œâ”€ setKeyType()
       â”œâ”€ setHolderName()
       â””â”€ setBankName()
                â”‚
                â†“
            setError('') // Limpa erros
                â”‚
   Clicou "Salvar"?
       â”‚
       â†“
    validateInputs()
       â”‚
    â”Œâ”€â”€â”´â”€â”€â”
    â”‚     â”‚
   âœ…   âŒ
    â”‚     â”‚
    â”‚     â””â”€ setError(mensagem)
    â”‚        Modal permanece aberto
    â”‚
    â†“
  handleSave() executado
       â”‚
  setLoading(true)
       â”‚
  Salva no Supabase
       â”‚
  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
  â”‚          â”‚
 âœ…        âŒ
  â”‚          â”‚
  setSave    setError()
  Success()  Modal fica
  â”‚          aberto
  â†“
setSaveSuccess(true)
  â”‚
  â†“
Exibe tela de sucesso
  â”‚
  â†“
setTimeout(1500ms)
  â”‚
  â†“
onClose() chamado
  â”‚
  â†“

DESMONTE (Modal fechado)
     â”‚
     â†“
TransiÃ§Ã£o saÃ­da (Framer Motion)
     â”‚
     â†“
Componente removido
```

---

## 6. Fluxo de Dados Supabase

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             FLUXO DE DADOS - SUPABASE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PRIMEIRA VEZ (inserÃ§Ã£o)
                                    
Admin abre modal â†’ Campos vazios
                        â”‚
                        â†“
Preenche e clica salvar
                        â”‚
                        â†“
   SELECT * FROM store_settings
   WHERE key = 'pix_config'
                        â”‚
                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚          â”‚
                 NÃƒO encontrado ENCONTRADO
                    â”‚          â”‚
                    â†“          â†“
                INSERT      UPDATE
                    â”‚          â”‚
                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â†“
              Sucesso! Dados salvos
                        â”‚
                        â†“
              PrÃ³ximas vezes: apenas UPDATE


SEGUNDA VEZ (atualizaÃ§Ã£o)

Admin abre modal â†’ Campos jÃ¡ preenchidos
  (fetchPixSettings executado)
                        â”‚
                        â†“
  SELECT * FROM store_settings
  WHERE key = 'pix_config'
                        â”‚
                        â†“
              ENCONTRADO (sempre)
                        â”‚
                        â†“
           Preenche com dados anterior
                        â”‚
      (Admin edita campos)
                        â”‚
                        â†“
    UPDATE store_settings SET value = {...}
    WHERE key = 'pix_config'
                        â”‚
                        â†“
               Sucesso! Atualizado
                        â”‚
                        â†“
          PrÃ³ximos pedidos usarÃ£o novos dados


FLUXO DO CLIENTE (leitura)

Client fazendo pedido
  â”‚
  â†“
Checkout.jsx carregado
  â”‚
  â†“
useEffect(() => fetchPixSettings())
  â”‚
  â†“
SELECT * FROM store_settings
WHERE key = 'pix_config'
  â”‚
  â†“
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚
ENCONTRADO ERRO/NÃƒO ENCONTRADO
â”‚            â”‚
â†“            â†“
Exibe dados  Exibe aviso WhatsApp
(Copiar)     (sem dados)
```

---

## 7. Componentes e Hierarquia

```
App (Main Component)
 â”‚
 â”œâ”€ BrowserRouter
 â”‚  â”‚
 â”‚  â””â”€ Routes
 â”‚     â”‚
 â”‚     â”œâ”€ /admin â†’ AdminLogin
 â”‚     â”‚
 â”‚     â”œâ”€ /admin/dashboard â†’ AdminDashboard
 â”‚     â”‚  â”‚
 â”‚     â”‚  â”œâ”€ [PixSettingsModal] â—„â”€â”€â”€ AQUI ESTÃ!
 â”‚     â”‚  â”‚   (controla: pixModalOpen)
 â”‚     â”‚  â”‚
 â”‚     â”‚  â”œâ”€ BusinessHoursModal
 â”‚     â”‚  â”œâ”€ ProductModal
 â”‚     â”‚  â””â”€ CategoryModal
 â”‚     â”‚
 â”‚     â””â”€ / â†’ Store
 â”‚        â”‚
 â”‚        â”œâ”€ Header
 â”‚        â”œâ”€ Hero
 â”‚        â”œâ”€ Menu
 â”‚        â”‚  â””â”€ ProductModal
 â”‚        â”‚
 â”‚        â”œâ”€ CartDrawer
 â”‚        â”‚
 â”‚        â”œâ”€ FloatingCart
 â”‚        â”‚
 â”‚        â””â”€ Checkout â—„â”€â”€â”€â”€ USA DADOS PIX!
 â”‚           (busca pixSettings)
 â”‚
 â””â”€ CartProvider (Context)
    (gerencia carrinho)
```

---

**Ãšltima atualizaÃ§Ã£o:** 2 de fevereiro de 2026
